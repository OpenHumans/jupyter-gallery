{% extends 'main/base.html' %}
{% load static %}
{% block content %}

  <div class="container">
    <h1>Your Notebook Gallery</h1>
    <p class="lead">
      See which notebooks you have shared and can share.
    </p>
    <div class="row">
      <div class="col-md-6">
        <p>
          <h4>Notebooks in your Open Humans accounts that can be shared</h4>
        {% for nb_file in notebook_files%}
          <a href="{% url 'add-notebook-gallery' nb_file.id %}">Add <code>{{nb_file.basename}}</code></a></br>
        {%endfor%}
        </p>
      </div>
      <div class="col-md-6">
        <p>
          <h4>Notebooks you have already published in the gallery</h4>
        </p>
        {% if existing_notebooks %}
          {%for notebook in existing_notebooks%}
          <code>{{notebook.notebook_name}}</code>
            <a href="#previewModal" data-nbid="{{notebook.id}}" data-nbtitle="{{notebook.notebook_name}}"data-toggle="modal">(preview)</a>
            <a href="{% url 'export-notebook' notebook.id %}">(export to json)</a>
            <a href='{{JH_URL}}/gallery-import?notebook_location={{base_url}}{% url 'export-notebook' notebook.id %}&notebook_name={{notebook.notebook_name}}'>(load in PDN)</a>
          </br>
          {%endfor%}
        {%else%}

          No data available yet.
        </a>
        <p>If you have recently connected your RescueTime account it can take a bit
          until we have gathered your data. Please come back later.</p>
        {%endif%}
      </div>
    </div>

    <!-- Trigger the modal with a button -->

<!-- Modal -->
<div id="previewModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><i><div id='nbtitle_fill'></i></code></h4>
      </div>
      <div class="modal-body">
        <div id='notebook_filler'></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
  </div>

{% endblock %}
